<footer class="container">
    <div class="row">
        <div class="col text-center">
            <p>&copy; {{ site.time | date: "%Y" }} {{ site.author.name }}. All rights reserved.</p>
        </div>
    </div>
</footer>

<script>
{% include /assets/js/bootstrap.bundle.min.js %}
</script>

<script>
  const form = document.getElementById('contact-form');
  
  // Debug: This will show in your console if the ID is missing
  const envId = '{{ site.formbricks_environment_id }}';
  if (!envId) console.error("Formbricks Error: Environment ID is missing from Jekyll config!");

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(form);
    const formValues = Object.fromEntries(formData);

    try {
      const response = await fetch(`https://app.formbricks.com/api/v1/client/{{ site.formbricks_environment_id }}/responses`, {
        method: 'POST',
        headers: { 
          'Content-Type': 'application/json',
          'Accept': 'application/json' 
        },
        body: JSON.stringify({
          surveyId: '{{ site.formbricks_form_id }}',
          meta: {action: 'Website Form', source: '{{ page.title }}', url: '{{ site.url }}{{ page.url }}'},
          finished: true,
          data: formValues // Must be 'data'
        }),
      });

      if (response.ok) {
        alert('Success! I will get back to you soon.');
        form.reset();
      } else {
        console.error('Submission Failed:', await response.text());
      }
    } catch (err) {
      console.error('Network/CORS Error:', err);
    }
  });
</script>


</body>
</html>